<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="">
  <link rel="stylesheet" href="theme/css/skeleton.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <form id="eventForm">
    <div class="row">
      <div class="six columns">
        <label for="exampleEmailInput">Usuario</label>
        <input class="u-full-width" type="text" id="User">
      </div>
      <div class="six columns">
        <label for="exampleEmailInput">Evento</label>
        <input class="u-full-width" type="text" id="Event">
      </div>

    </div>
    <div class="row">
      <div class="six columns">
        <label for="exampleEmailInput">Mensaje</label>
        <input class="u-full-width" type="text" id="Comment">
      </div>
      <div class="six columns">
        <label for="exampleEmailInput">Fecha</label>
        <div class=".selectModal">
          <ion-datetime-button datetime="datetime"></ion-datetime-button>
          <ion-modal [keepContentsMounted]="true">
            <ng-template id="fechaAlm">
              <ion-datetime id="datetime"></ion-datetime>
            </ng-template>
          </ion-modal>
        </div>
      </div>
    </div>

    <div class="row">
      <label for="exampleEmailInput">Estado</label>

    </div>

    <div class="row">
      <input type="checkbox" id="Status" checked>
    </div>
    <div class="allButtons">
      <input class="button-primary" type="submit" value="Enviar">
    </div>

  </form>
  <div class="tablaTareas">
    <table class="u-full-width" id="dataTable">
      <thead>
        <tr>
          <th>Mensaje</th>
          <th>Evento</th>
          <th>Fecha y Hora</th>
          <th>Mensaje</th>
          <th>Estado</th>
          <th>Eliminar</th>
        </tr>
      </thead>
      <tbody>

      </tbody>
    </table>
  </div>
</body>

<script>
  document.getElementById('eventForm').addEventListener('submit', function (event) {
    event.preventDefault();


    var user = document.querySelector('#User').value;
    var events = document.querySelector('#Event').value;
    var date = document.querySelector('#datetime').value;
    var message = document.querySelector('#Comment').value;
    var status = document.querySelector('#Status').checked ? 'Activado' : 'Desactivado';

    var newRow = document.createElement('tr');


    newRow.innerHTML = '<td>' + user + '</td>' +
      '<td>' + events + '</td>' +
      '<td>' + date + '</td>' +
      '<td>' + message + '</td>' +
      '<td>' + status + '</td>' +
      '<td><button class="deleteButton">Eliminar</button></td>';

    document.querySelector('#dataTable tbody').appendChild(newRow);
    document.addEventListener('click', function (event) {
      if (event.target.classList.contains('deleteButton')) {
        console.log('Columna eliminada:', getRowData(event.target))
        deleteRow(event.target);
      }
    });

    function deleteRow(button) {
      var row = button.parentNode.parentNode;
      if (row && row.parentNode) {
        row.parentNode.removeChild(row);
      }
    }
    function getRowData(button) {
    var row = button.parentNode.parentNode;
    var cells = row.querySelectorAll('td');
    var rowData = {};

    for (var i = 0; i < cells.length; i++) {
      var header = document.querySelector('#dataTable th:nth-child(' + (i + 1) + ')').innerText;
      rowData[header] = cells[i].innerText;
    }

    return rowData;
  }

    document.querySelector('#User').value = '';
    document.querySelector('#Event').value = '';
    document.querySelector('#datetime').value = '';
    document.querySelector('#Comment').value = '';
    document.querySelector('#Status').checked = true;
    console.log('Columna creada:', { user, events, date, status, message })
  });
</script>

</html>